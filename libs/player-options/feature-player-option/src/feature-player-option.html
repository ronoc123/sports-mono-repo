<div class="player-options-feature">
  <div class="header">
    <h1>Player Options</h1>
    <div class="header-actions">
      <button mat-icon-button (click)="onRefresh()" [disabled]="isLoading()">
        <mat-icon>refresh</mat-icon>
      </button>
    </div>
  </div>

  <!-- Error Message -->
  <div class="error-banner" *ngIf="error()">
    <mat-icon color="warn">error</mat-icon>
    <span>{{ error() }}</span>
  </div>

  <!-- Loading Indicator -->
  <div class="loading-container" *ngIf="isLoading()">
    <mat-progress-spinner diameter="40"></mat-progress-spinner>
    <p>Loading player options...</p>
  </div>

  <!-- Player Options Content -->
  <div class="player-options-content" *ngIf="!isLoading()">
    <mat-card class="success-card">
      <mat-card-header>
        <mat-card-title>✅ Player Options Navigation Working!</mat-card-title>
        <mat-card-subtitle
          >Successfully loaded player options feature</mat-card-subtitle
        >
      </mat-card-header>
      <mat-card-content>
        <p><strong>Navigation Status:</strong> ✅ Working correctly</p>
        <p>
          <strong>Route:</strong> /player-option (sports-ui) or /player-options
          (sports-gm)
        </p>
        <p>
          <strong>Store Status:</strong> {{ isLoading() ? 'Loading...' : 'Ready'
          }}
        </p>
        <p>
          <strong>Player Options Count:</strong> {{ playerOptions().length }}
        </p>

        <div *ngIf="playerOptions().length > 0">
          <h3>Available Player Options:</h3>
          <div *ngFor="let option of playerOptions()" class="option-item">
            <mat-card>
              <mat-card-header>
                <mat-card-title>{{ option.title }}</mat-card-title>
                <mat-card-subtitle
                  >{{ option.organizationName }}</mat-card-subtitle
                >
              </mat-card-header>
              <mat-card-content>
                <p>{{ option.description }}</p>
                <p><strong>Status:</strong> {{ option.status }}</p>
                <p><strong>Total Votes:</strong> {{ option.totalVotes }}</p>
                <p>
                  <strong>Has User Voted:</strong> {{ option.hasUserVoted ?
                  'Yes' : 'No' }}
                </p>

                <div *ngIf="option.choices && option.choices.length > 0">
                  <h4>Voting Choices:</h4>
                  <div
                    *ngFor="let choice of option.choices"
                    class="choice-item"
                  >
                    <button
                      mat-raised-button
                      [color]="choice.isSelected ? 'accent' : 'primary'"
                      (click)="onVote(option.id)"
                      [disabled]="option.hasUserVoted"
                    >
                      {{ choice.title }} ({{ choice.voteCount }} votes - {{
                      choice.votePercentage }}%)
                    </button>
                  </div>
                </div>
              </mat-card-content>
            </mat-card>
          </div>
        </div>

        <div *ngIf="playerOptions().length === 0 && !isLoading()">
          <p>
            No player options available. The API is using mock data for
            development.
          </p>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
